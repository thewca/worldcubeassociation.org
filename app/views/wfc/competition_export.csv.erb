<% require 'csv' %>
<% headers = [
  "Id", "Name", "Country", "Continent",
  "Start", "End", "Announced", "Posted",
  "Link on WCA", "Competitors", "Delegates",
  "Currency Code", "Base Registration Fee", "Currency Subunit",
  "Championship Type", "Exempt from WCA Dues", "Organizers", "Calculated Dues",
  "Dues Payer Name", "Dues Payer Email", "Is Combined Invoice", "Dues Band",
  "Error (if any)",
] %>
<%= CSV.generate_line(headers, col_sep: "\t").html_safe -%>
<% @competitions.each do |c| %>
  <%#
    Force English locale to ensure numbers are formatted with dots (e.g., "123.45")
    instead of commas, preventing errors in formula calculations.
  %>
  <%= I18n.with_locale(:en) { CSV.generate_line(c.export_for_dues_generation, col_sep: "\t") }.html_safe -%>
<% end %>
